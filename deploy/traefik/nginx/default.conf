server {
  listen 80 default_server;
  server_name _;
  absolute_redirect off;

  # Redirect non-trailing-slash paths to trailing slash
  location = /user {
    return 301 /user/;
  }
  location = /vendor {
    return 301 /vendor/;
  }

  # Serve /user SPA
  location ^~ /user/ {
    root /usr/share/nginx/html;
    try_files $uri /user/index.html;
    add_header Cache-Control "public, max-age=3600";
  }

  # Serve /vendor SPA
  location ^~ /vendor/ {
    root /usr/share/nginx/html;
    try_files $uri /vendor/index.html;
    add_header Cache-Control "public, max-age=3600";
  }

  # Default landing to /user/ if someone hits root on this upstream directly
  location = / {
    return 302 /user/;
  }
}
